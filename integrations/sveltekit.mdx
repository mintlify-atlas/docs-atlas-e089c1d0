---
title: SvelteKit
description: Learn how to integrate Better Auth with SvelteKit
---

Better Auth provides native integration with SvelteKit through the `svelteKitHandler` helper and dedicated cookie management.

## Installation

<Steps>

<Step>
### Install Better Auth

First, install Better Auth in your SvelteKit project:

```package-install
better-auth
```
</Step>

<Step>
### Configure Better Auth

Create your Better Auth instance. See the [installation guide](/docs/installation) for detailed configuration.

```ts title="lib/auth.ts"
import { betterAuth } from "better-auth";

export const auth = betterAuth({
  database: {
    // your database configuration
  },
  // other options
});
```
</Step>

<Step>
### Mount the Handler

Use the `svelteKitHandler` in your `hooks.server.ts` to handle authentication requests:

```ts title="hooks.server.ts"
import { auth } from "$lib/auth";
import { svelteKitHandler } from "better-auth/svelte-kit";
import { building } from "$app/environment";

export async function handle({ event, resolve }) {
  return svelteKitHandler({ event, resolve, auth, building });
}
```

The handler automatically intercepts requests to `/api/auth/*` and routes them to Better Auth.
</Step>

<Step>
### Create Client Instance

Create a client instance to interact with Better Auth from your Svelte components:

```ts title="lib/auth-client.ts"
import { createAuthClient } from "better-auth/svelte";

export const authClient = createAuthClient({
  baseURL: import.meta.env.VITE_APP_URL, // optional if same domain
});
```
</Step>

</Steps>

## Usage

### Client-Side Components

Use the client instance in your Svelte components:

```svelte title="lib/components/AuthButton.svelte"
<script lang="ts">
  import { authClient } from "$lib/auth-client";
  const session = authClient.useSession();
</script>

{#if $session.data}
  <div>
    <p>Welcome, {$session.data.user.name}</p>
    <button on:click={() => authClient.signOut()}>Sign Out</button>
  </div>
{:else}
  <button
    on:click={() => authClient.signIn.social({ provider: "github" })}
  >
    Sign In with GitHub
  </button>
{/if}
```

### Server-Side Access

To access session data in `+page.server.ts`, `+layout.server.ts`, or server routes, populate `event.locals` in your hook:

```ts title="hooks.server.ts"
import { auth } from "$lib/auth";
import { svelteKitHandler } from "better-auth/svelte-kit";
import { building } from "$app/environment";

export async function handle({ event, resolve }) {
  // Fetch session and add to event.locals
  const session = await auth.api.getSession({
    headers: event.request.headers,
  });

  if (session) {
    event.locals.session = session.session;
    event.locals.user = session.user;
  }

  return svelteKitHandler({ event, resolve, auth, building });
}
```

Now you can access session data in your server code:

```ts title="routes/dashboard/+page.server.ts"
import { redirect } from "@sveltejs/kit";
import type { PageServerLoad } from "./$types";

export const load: PageServerLoad = async ({ locals }) => {
  if (!locals.user) {
    throw redirect(303, "/sign-in");
  }

  return {
    user: locals.user,
  };
};
```

### Form Actions

Use Better Auth in SvelteKit form actions:

```ts title="routes/login/+page.server.ts"
import { auth } from "$lib/auth";
import type { Actions } from "./$types";

export const actions: Actions = {
  default: async ({ request }) => {
    const formData = await request.formData();
    const email = formData.get("email") as string;
    const password = formData.get("password") as string;

    const result = await auth.api.signInEmail({
      body: { email, password },
    });

    return { success: true };
  },
};
```

## Cookie Handling

When calling functions that set cookies in server-side code, use the `sveltekitCookies` plugin to automatically handle cookie setting:

```ts title="lib/auth.ts"
import { betterAuth } from "better-auth";
import { sveltekitCookies } from "better-auth/svelte-kit";
import { getRequestEvent } from "$app/server";

export const auth = betterAuth({
  // your config
  plugins: [
    sveltekitCookies(getRequestEvent), // must be last in plugins array
  ],
});
```

<Callout>
The `getRequestEvent` function requires SvelteKit 2.20.0 or later.
</Callout>

Now cookies will be set automatically when you call auth methods in form actions or server routes.

## Route Protection

Protect routes by checking session in `+page.server.ts` or `+layout.server.ts`:

```ts title="routes/(protected)/+layout.server.ts"
import { redirect } from "@sveltejs/kit";
import type { LayoutServerLoad } from "./$types";

export const load: LayoutServerLoad = async ({ locals }) => {
  if (!locals.user) {
    throw redirect(303, "/sign-in");
  }

  return {
    user: locals.user,
  };
};
```

## API Reference

### `svelteKitHandler(options)`

Handles Better Auth requests in SvelteKit's server hooks.

**Parameters:**
- `auth`: Better Auth instance
- `event`: SvelteKit RequestEvent
- `resolve`: SvelteKit resolve function
- `building`: SvelteKit building flag (from `$app/environment`)

**Returns:** Response

**Source:** [svelte-kit.ts:13-35](/home/daytona/workspace/source/packages/better-auth/src/integrations/svelte-kit.ts:13-35)

### `toSvelteKitHandler(auth)`

Converts Better Auth handler to a simple SvelteKit handler function (alternative approach).

**Parameters:**
- `auth`: Better Auth instance

**Returns:** Handler function

**Source:** [svelte-kit.ts:6-11](/home/daytona/workspace/source/packages/better-auth/src/integrations/svelte-kit.ts:6-11)

### `sveltekitCookies(getRequestEvent)`

Plugin that automatically sets cookies in SvelteKit using `event.cookies.set()`.

**Parameters:**
- `getRequestEvent`: Function that returns the current request event (from `$app/server`)

**Source:** [svelte-kit.ts:54-98](/home/daytona/workspace/source/packages/better-auth/src/integrations/svelte-kit.ts:54-98)

## Related

- [Installation Guide](/docs/installation)
- [Client Documentation](/docs/client/svelte)
- [Session Management](/docs/concepts/sessions)
