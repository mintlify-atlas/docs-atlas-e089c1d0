---
title: Organization Plugin
description: Multi-tenant organization management with teams, members, and role-based access control
---

The organization plugin enables multi-tenant functionality in your application, allowing users to create and manage organizations with members, teams, invitations, and fine-grained permissions.

## Features

- **Multi-tenant organizations** - Users can create and belong to multiple organizations
- **Member management** - Invite, add, remove, and manage organization members
- **Role-based access control** - Define custom roles with granular permissions
- **Team support** - Organize members into teams within organizations
- **Invitation system** - Send and manage email invitations with expiration
- **Dynamic access control** - Create and manage roles at runtime per organization
- **Active organization** - Track user's currently selected organization in session

## Installation

Install the required package:

<CodeGroup>

```bash npm
npm install better-auth
```

```bash pnpm
pnpm add better-auth
```

```bash bun
bun add better-auth
```

</CodeGroup>

## Configuration

### Basic Setup

<Steps>

<Step title="Add Plugin to Server">

Import and add the organization plugin to your Better Auth configuration:

```typescript auth.ts
import { betterAuth } from "better-auth";
import { organization } from "better-auth/plugins";

export const auth = betterAuth({
  database: {
    // your database config
  },
  plugins: [
    organization({
      allowUserToCreateOrganization: true,
      creatorRole: "owner",
      membershipLimit: 100,
    }),
  ],
});
```

</Step>

<Step title="Add Client Plugin">

Add the organization client plugin:

```typescript auth-client.ts
import { createAuthClient } from "better-auth/client";
import { organizationClient } from "better-auth/plugins/organization/client";

export const authClient = createAuthClient({
  baseURL: "http://localhost:3000",
  plugins: [
    organizationClient(),
  ],
});
```

</Step>

<Step title="Run Migrations">

Generate and run database migrations:

```bash
npx @better-auth/cli migrate
```

This creates the required tables:
- `organization` - Organization details
- `member` - Organization members
- `invitation` - Pending invitations
- `team` - Teams (if enabled)
- `teamMember` - Team membership (if enabled)
- `organizationRole` - Custom roles (if dynamic access control enabled)

</Step>

</Steps>

### Plugin Options

<ParamField path="allowUserToCreateOrganization" type="boolean | function" default="true">
  Allow users to create organizations. Pass a function to add custom logic:
  
  ```typescript
  allowUserToCreateOrganization: async (user) => {
    const plan = await getUserPlan(user);
    return plan.name === "pro";
  }
  ```
</ParamField>

<ParamField path="organizationLimit" type="number | function">
  Maximum organizations a user can create. Pass a function for dynamic limits:
  
  ```typescript
  organizationLimit: async (user) => {
    const plan = await getUserPlan(user);
    return plan.maxOrgs;
  }
  ```
</ParamField>

<ParamField path="creatorRole" type="string" default="owner">
  Role assigned to the organization creator.
</ParamField>

<ParamField path="membershipLimit" type="number" default="100">
  Maximum members allowed per organization.
</ParamField>

<ParamField path="invitationExpiresIn" type="number" default="172800">
  Invitation expiration time in seconds (default: 48 hours).
</ParamField>

<ParamField path="invitationLimit" type="number | function" default="100">
  Maximum invitations per organization.
</ParamField>

<ParamField path="requireEmailVerificationOnInvitation" type="boolean" default="false">
  Require email verification to accept invitations.
</ParamField>

<ParamField path="roles" type="object">
  Custom role definitions with permissions. See [Access Control](#access-control) section.
</ParamField>

<ParamField path="ac" type="AccessControl">
  Access control configuration defining available permissions. See [Access Control](#access-control) section.
</ParamField>

<ParamField path="teams" type="object">
  Team configuration. See [Teams](#teams) section.
</ParamField>

<ParamField path="dynamicAccessControl" type="object">
  Dynamic role management. See [Dynamic Access Control](#dynamic-access-control) section.
</ParamField>

<ParamField path="sendInvitationEmail" type="function">
  Send invitation emails:
  
  ```typescript
  sendInvitationEmail: async (data) => {
    const url = `https://yourapp.com/accept?id=${data.id}`;
    await sendEmail(data.email, "Invitation", `Join: ${url}`);
  }
  ```
</ParamField>

<ParamField path="disableOrganizationDeletion" type="boolean" default="false">
  Prevent organization deletion.
</ParamField>

## Usage

### Creating Organizations

**Client:**

```typescript
const { data, error } = await authClient.organization.create({
  name: "Acme Corp",
  slug: "acme-corp",
  logo: "https://example.com/logo.png",
  metadata: {
    industry: "Technology",
  },
});
```

**Server:**

```typescript
await auth.api.createOrganization({
  body: {
    name: "Acme Corp",
    slug: "acme-corp",
  },
  headers: request.headers,
});
```

### Managing Members

**Invite Member:**

```typescript
await authClient.organization.inviteMember({
  email: "user@example.com",
  role: "member",
  organizationId: "org_123",
});
```

**Accept Invitation:**

```typescript
await authClient.organization.acceptInvitation({
  invitationId: "inv_123",
});
```

**Remove Member:**

```typescript
await authClient.organization.removeMember({
  memberIdOrUserId: "user_123",
  organizationId: "org_123",
});
```

**Update Member Role:**

```typescript
await authClient.organization.updateMemberRole({
  memberIdOrUserId: "user_123",
  role: "admin",
  organizationId: "org_123",
});
```

### Active Organization

**Set Active Organization:**

```typescript
await authClient.organization.setActive({
  organizationId: "org_123",
});
```

The active organization is stored in the session and accessible via:

```typescript
const session = await auth.api.getSession({ headers: request.headers });
const activeOrgId = session.session.activeOrganizationId;
```

### Listing Organizations

```typescript
const { data } = await authClient.organization.list();
// Returns all organizations the user belongs to
```

## Access Control

Define custom roles and permissions using the access control system.

### Default Roles

The plugin includes three default roles:

- **owner** - Full control including organization deletion
- **admin** - Manage members, teams, and settings (cannot delete org)
- **member** - Read-only access

### Custom Roles

**Define Statements:**

```typescript
import { createAccessControl } from "better-auth/plugins/access";

const ac = createAccessControl({
  organization: ["update", "delete", "view"],
  member: ["create", "update", "delete", "view"],
  invitation: ["create", "cancel"],
  billing: ["view", "manage"],
});
```

**Create Roles:**

```typescript
const managerRole = ac.newRole({
  organization: ["update"],
  member: ["create", "view"],
  invitation: ["create"],
  billing: ["view"],
});

const billingRole = ac.newRole({
  organization: [],
  member: ["view"],
  invitation: [],
  billing: ["view", "manage"],
});
```

**Configure Plugin:**

```typescript
export const auth = betterAuth({
  plugins: [
    organization({
      ac,
      roles: {
        manager: managerRole,
        billing: billingRole,
      },
    }),
  ],
});
```

### Checking Permissions

**Server-side:**

```typescript
const hasPermission = await auth.api.hasPermission({
  body: {
    permissions: {
      member: ["create"],
      organization: ["update"],
    },
    organizationId: "org_123",
  },
  headers: request.headers,
});
```

**Client-side:**

```typescript
const hasPermission = authClient.organization.checkRolePermission({
  role: "manager",
  permissions: {
    member: ["create"],
  },
});
```

## Teams

Organize members into teams for better collaboration.

### Enable Teams

```typescript
export const auth = betterAuth({
  plugins: [
    organization({
      teams: {
        enabled: true,
        defaultTeam: {
          enabled: true, // Auto-create default team
        },
        maximumTeams: 10,
        maximumMembersPerTeam: 50,
      },
    }),
  ],
});
```

### Team Operations

**Create Team:**

```typescript
await authClient.organization.createTeam({
  name: "Engineering",
  organizationId: "org_123",
});
```

**Add Team Member:**

```typescript
await authClient.organization.addTeamMember({
  teamId: "team_123",
  userId: "user_123",
});
```

**Set Active Team:**

```typescript
await authClient.organization.setActiveTeam({
  teamId: "team_123",
});
```

**List Teams:**

```typescript
const teams = await authClient.organization.listTeams({
  organizationId: "org_123",
});
```

## Dynamic Access Control

Create and manage roles at runtime on a per-organization basis.

### Enable Dynamic Access Control

```typescript
export const auth = betterAuth({
  plugins: [
    organization({
      dynamicAccessControl: {
        enabled: true,
        maximumRolesPerOrganization: 20,
      },
    }),
  ],
});
```

### Managing Dynamic Roles

**Create Role:**

```typescript
await authClient.organization.createOrgRole({
  organizationId: "org_123",
  role: "support",
  permission: JSON.stringify({
    member: ["view"],
    organization: [],
  }),
});
```

**List Roles:**

```typescript
const roles = await authClient.organization.listOrgRoles({
  organizationId: "org_123",
});
```

**Update Role:**

```typescript
await authClient.organization.updateOrgRole({
  roleId: "role_123",
  permission: JSON.stringify({
    member: ["view", "update"],
  }),
});
```

## Hooks

Customize behavior with lifecycle hooks:

```typescript
organization({
  organizationHooks: {
    beforeCreateOrganization: async (data) => {
      // Validate or modify organization data
      return { data: { ...data.organization, verified: false } };
    },
    afterCreateOrganization: async (data) => {
      // Send welcome email, create default resources, etc.
      await setupOrganizationResources(data.organization);
    },
    beforeAddMember: async (data) => {
      // Check member limits, validate, etc.
    },
    afterUpdateMemberRole: async (data) => {
      // Audit log, notifications, etc.
    },
  },
})
```

## API Reference

### Server Methods

- `auth.api.createOrganization` - Create organization
- `auth.api.updateOrganization` - Update organization
- `auth.api.deleteOrganization` - Delete organization
- `auth.api.listOrganizations` - List user's organizations
- `auth.api.getFullOrganization` - Get organization with members and invitations
- `auth.api.setActiveOrganization` - Set active organization
- `auth.api.createInvitation` - Invite member
- `auth.api.acceptInvitation` - Accept invitation
- `auth.api.cancelInvitation` - Cancel invitation
- `auth.api.rejectInvitation` - Reject invitation
- `auth.api.listInvitations` - List organization invitations
- `auth.api.addMember` - Add member directly (server only)
- `auth.api.removeMember` - Remove member
- `auth.api.updateMemberRole` - Update member role
- `auth.api.listMembers` - List organization members
- `auth.api.getActiveMember` - Get current user's member info
- `auth.api.hasPermission` - Check permissions

### Client Methods

- `authClient.organization.create` - Create organization
- `authClient.organization.update` - Update organization
- `authClient.organization.delete` - Delete organization
- `authClient.organization.list` - List organizations
- `authClient.organization.getFullOrganization` - Get full organization
- `authClient.organization.setActive` - Set active organization
- `authClient.organization.inviteMember` - Invite member
- `authClient.organization.acceptInvitation` - Accept invitation
- `authClient.organization.cancelInvitation` - Cancel invitation
- `authClient.organization.rejectInvitation` - Reject invitation
- `authClient.organization.listInvitations` - List invitations
- `authClient.organization.removeMember` - Remove member
- `authClient.organization.updateMemberRole` - Update member role
- `authClient.organization.listMembers` - List members
- `authClient.organization.getActiveMember` - Get active member
- `authClient.organization.checkRolePermission` - Check role permissions (client-side)

### Team Methods

- `authClient.organization.createTeam` - Create team
- `authClient.organization.listTeams` - List teams
- `authClient.organization.updateTeam` - Update team
- `authClient.organization.removeTeam` - Delete team
- `authClient.organization.setActiveTeam` - Set active team
- `authClient.organization.addTeamMember` - Add team member
- `authClient.organization.removeTeamMember` - Remove team member
- `authClient.organization.listTeamMembers` - List team members

### Dynamic Role Methods

- `authClient.organization.createOrgRole` - Create role
- `authClient.organization.listOrgRoles` - List roles
- `authClient.organization.getOrgRole` - Get role
- `authClient.organization.updateOrgRole` - Update role
- `authClient.organization.deleteOrgRole` - Delete role

## Database Schema

```typescript
interface Organization {
  id: string;
  name: string;
  slug: string;
  logo?: string;
  createdAt: Date;
  metadata?: string; // JSON
}

interface Member {
  id: string;
  organizationId: string;
  userId: string;
  role: string;
  createdAt: Date;
}

interface Invitation {
  id: string;
  organizationId: string;
  email: string;
  role?: string;
  status: "pending" | "accepted" | "rejected" | "canceled";
  expiresAt: Date;
  createdAt: Date;
  inviterId: string;
  teamId?: string; // If teams enabled
}

interface Team {
  id: string;
  name: string;
  organizationId: string;
  createdAt: Date;
  updatedAt?: Date;
}

interface TeamMember {
  id: string;
  teamId: string;
  userId: string;
  createdAt?: Date;
}

interface OrganizationRole {
  id: string;
  organizationId: string;
  role: string;
  permission: string; // JSON
  createdAt: Date;
  updatedAt?: Date;
}
```